<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>A-Lab Â· ì¼ì¼ë¡œê·¸</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    /* --------------------------
       0. ê¸°ë³¸ ìƒ‰ìƒ & ê³µí†µ ìŠ¤íƒ€ì¼
       -------------------------- */
    :root {
      --bg-main: #f3f4f8;
      --bg-card: #ffffff;
      --accent: #6366f1;      /* í¬ì¸íŠ¸ ì»¬ëŸ¬ (ë³´ë¼ê³„ì—´) */
      --accent-soft: #eef0ff;
      --accent-warn: #ff6b6b;
      --text-main: #111827;
      --text-sub: #6b7280;
      --border-soft: #e5e7eb;
      --shadow-soft: 0 12px 30px rgba(15, 23, 42, 0.12);
      --radius-card: 18px;
      --radius-pill: 999px;
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      padding: 0;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", system-ui,
        sans-serif;
      background: var(--bg-main);
      color: var(--text-main);
    }

    a {
      text-decoration: none;
      color: inherit;
    }

    button {
      font-family: inherit;
    }

    .hidden {
      display: none !important;
    }

    /* --------------------------
       1. ìƒë‹¨ í—¤ë”
       -------------------------- */
    header {
      position: sticky;
      top: 0;
      z-index: 20;
      background: rgba(243, 244, 248, 0.92);
      backdrop-filter: blur(16px);
      border-bottom: 1px solid rgba(148, 163, 184, 0.3);
    }

    .top-bar {
      max-width: 960px;
      margin: 0 auto;
      padding: 8px 14px 10px;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .top-left,
    .top-right {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .menu-icon {
      width: 26px;
      height: 26px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.6);
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      background: rgba(255, 255, 255, 0.9);
      box-shadow: 0 2px 6px rgba(15, 23, 42, 0.12);
    }

    .menu-icon div {
      width: 14px;
      height: 2px;
      background: #4b5563;
      border-radius: 999px;
      position: relative;
    }

    .menu-icon div::before,
    .menu-icon div::after {
      content: "";
      position: absolute;
      left: 0;
      width: 14px;
      height: 2px;
      background: #4b5563;
      border-radius: 999px;
    }

    .menu-icon div::before {
      top: -4px;
    }

    .menu-icon div::after {
      top: 4px;
    }

    .header-logo {
      display: flex;
      align-items: center;
      gap: 6px;
      font-weight: 700;
      font-size: 18px;
      letter-spacing: 0.02em;
      color: #111827;
    }

    .header-logo span.emoji {
      font-size: 20px;
    }

    .header-logo span.text {
      font-weight: 700;
    }

    .header-title-sub {
      font-size: 11px;
      color: var(--text-sub);
      margin-left: 2px;
    }

    /* --------------------------
       2. ì „ì²´ ë ˆì´ì•„ì›ƒ / ë©”ì¸ ì»¨í…Œì´ë„ˆ
       -------------------------- */
    main {
      max-width: 960px;
      margin: 8px auto 80px;
      padding: 0 12px 24px;
    }

    .section-title-row {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 6px;
      margin-top: 6px;
    }

    .section-title {
      font-size: 14px;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .section-title-dot {
      width: 6px;
      height: 6px;
      border-radius: 50%;
      background: #111827;
    }

    .section-sub {
      font-size: 11px;
      color: var(--text-sub);
    }

    /* --------------------------
       3. ì¹´ë“œ ê³µí†µ ìŠ¤íƒ€ì¼
       -------------------------- */
    .card {
      background: var(--bg-card);
      border-radius: var(--radius-card);
      box-shadow: var(--shadow-soft);
      padding: 14px 14px 16px;
      margin-bottom: 14px;
      position: relative;
      overflow: hidden;
    }

    .card-header-row {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 8px;
    }

    .badge-soft {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 3px 9px;
      border-radius: 999px;
      background: #e5e7eb;
      font-size: 11px;
      color: #374151;
    }

    .badge-soft span {
      font-size: 12px;
    }

    /* ì§„í–‰ë¥  ë°” */
    .progress-wrapper {
      margin-top: 4px;
      margin-bottom: 6px;
    }

    .progress-bar-bg {
      width: 100%;
      height: 12px;
      border-radius: 999px;
      background: #e5e7eb;
      overflow: hidden;
      position: relative;
    }

    .progress-bar-fill {
      height: 100%;
      width: 35%;
      border-radius: 999px;
      background: linear-gradient(90deg, #4ade80, #22c55e);
      box-shadow: 0 4px 10px rgba(34, 197, 94, 0.4);
      transition: width 0.3s ease-out;
    }

    .runner-emoji {
      position: absolute;
      top: -18px;
      right: 0;
      font-size: 18px;
      pointer-events: none;
    }

    .progress-caption {
      margin-top: 4px;
      font-size: 11px;
      color: var(--text-sub);
      display: flex;
      justify-content: space-between;
    }

    /* --------------------------
       4. ìƒë‹¨ ì•½/ìˆ˜ë©´ â€œë‹¤ìŒ í•­ëª©â€ ì¹´ë“œ
       -------------------------- */
    .next-row {
      display: grid;
      grid-template-columns: 1fr;
      gap: 8px;
      margin-top: 6px;
    }

    @media (min-width: 540px) {
      .next-row {
        grid-template-columns: repeat(2, minmax(0, 1fr));
      }
    }

    .next-item-card {
      border-radius: 14px;
      background: linear-gradient(145deg, #ffffff, #f8fafc);
      box-shadow: 0 10px 24px rgba(15, 23, 42, 0.15);
      padding: 10px 12px;
      display: flex;
      flex-direction: column;
      gap: 4px;
      border: 1px solid rgba(148, 163, 184, 0.35);
    }

    .next-item-top {
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 12px;
      color: #4b5563;
    }

    .next-item-main {
      display: flex;
      align-items: baseline;
      justify-content: space-between;
      gap: 8px;
      margin-top: 2px;
    }

    .next-label {
      font-size: 13px;
      font-weight: 600;
    }

    .next-time {
      font-family: "SF Mono", ui-monospace, Menlo, Monaco, Consolas, "Liberation Mono",
        "Courier New", monospace;
      font-size: 14px;
      font-weight: 600;
      color: #111827;
    }

    .next-diff {
      font-size: 11px;
      font-weight: 600;
      color: var(--accent-warn);
      white-space: nowrap;
    }

    .pill-btn {
      border-radius: 999px;
      border: none;
      padding: 4px 10px;
      font-size: 11px;
      font-weight: 600;
      cursor: pointer;
      background: #22c55e;
      color: white;
      box-shadow: 0 6px 14px rgba(34, 197, 94, 0.35);
      display: inline-flex;
      align-items: center;
      gap: 4px;
    }

    .pill-btn span {
      font-size: 12px;
    }

    /* --------------------------
       5. ì•½ & ìˆ˜ë©´ ì•„ì½”ë””ì–¸ ì¹´ë“œ
       -------------------------- */
    .accordion-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      cursor: pointer;
      padding: 4px 0 2px;
    }

    .accordion-title {
      font-size: 14px;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .accordion-arrow {
      font-size: 16px;
      color: #6b7280;
      transition: transform 0.2s ease-out;
    }

    .accordion-arrow.open {
      transform: rotate(180deg);
    }

    .med-sleep-columns {
      display: grid;
      grid-template-columns: 1fr;
      gap: 10px;
      margin-top: 10px;
    }

    @media (min-width: 640px) {
      .med-sleep-columns {
        grid-template-columns: repeat(2, minmax(0, 1fr));
      }
    }

    .sub-card {
      border-radius: 16px;
      background: #f9fafb;
      padding: 10px 12px 10px;
      box-shadow: inset 0 0 0 1px rgba(209, 213, 219, 0.8);
    }

    .sub-card-title {
      font-size: 13px;
      font-weight: 600;
      margin-bottom: 6px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      color: #374151;
    }

    .check-row {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 8px;
      padding: 6px 8px;
      margin-bottom: 4px;
      border-radius: 12px;
      background: #ffffff;
      box-shadow: 0 4px 10px rgba(15, 23, 42, 0.06);
      font-size: 12px;
    }

    .check-left {
      display: flex;
      align-items: center;
      gap: 8px;
      min-width: 0;
    }

    .check-label-main {
      font-weight: 500;
    }

    .check-plan {
      font-size: 11px;
      color: #6b7280;
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas,
        "Liberation Mono", "Courier New", monospace;
    }

    .check-right {
      text-align: right;
      min-width: 70px;
    }

    .check-time {
      font-size: 11px;
      color: var(--accent-warn);
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas,
        "Liberation Mono", "Courier New", monospace;
    }

    .check-diff {
      font-size: 10px;
      color: var(--accent-warn);
    }

    .check-row.checked .check-label-main {
      text-decoration: line-through;
      color: #9ca3af;
    }

    .check-row.checked .check-plan {
      text-decoration: line-through;
      color: #d1d5db;
    }

    /* --------------------------
       6. ë‚´ ìƒíƒœ ê¸°ë¡ ì¹´ë“œ
       -------------------------- */
    .status-card-input {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-top: 4px;
    }

    .status-input {
      flex: 1;
      border-radius: var(--radius-pill);
      border: 1px solid var(--border-soft);
      padding: 8px 12px;
      font-size: 13px;
      outline: none;
      background: #f9fafb;
    }

    .status-input:focus {
      border-color: var(--accent);
      background: #ffffff;
      box-shadow: 0 0 0 1px rgba(99, 102, 241, 0.4);
    }

    .status-send-btn {
      border-radius: 999px;
      border: none;
      background: var(--accent);
      color: white;
      padding: 8px 12px;
      font-size: 13px;
      font-weight: 600;
      cursor: pointer;
      box-shadow: 0 8px 16px rgba(99, 102, 241, 0.45);
      display: inline-flex;
      align-items: center;
      gap: 4px;
      white-space: nowrap;
    }

    .status-send-btn span {
      font-size: 12px;
    }

    .status-log-list {
      margin-top: 10px;
      max-height: 220px;
      overflow-y: auto;
      padding-right: 4px;
    }

    .status-item {
      display: flex;
      align-items: flex-start;
      justify-content: space-between;
      gap: 8px;
      padding: 6px 8px;
      border-radius: 10px;
      background: #f9fafb;
      margin-bottom: 6px;
      font-size: 12px;
    }

    .status-content {
      flex: 1;
      word-break: break-all;
    }

    .status-time {
      font-size: 11px;
      color: var(--text-sub);
      white-space: nowrap;
      text-align: right;
    }

    /* --------------------------
       7. í†µê³„ ì¹´ë“œ
       -------------------------- */
    .stats-grid {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 8px;
      margin-top: 6px;
    }

    .stat-pill {
      border-radius: 16px;
      background: #f9fafb;
      padding: 8px 10px;
      box-shadow: 0 4px 10px rgba(15, 23, 42, 0.06);
      font-size: 11px;
      display: flex;
      flex-direction: column;
      gap: 2px;
    }

    .stat-label {
      color: #6b7280;
    }

    .stat-value {
      font-weight: 700;
      font-size: 14px;
    }

    /* --------------------------
       8. ë„¤ë¹„ê²Œì´ì…˜ ë°”
       -------------------------- */
    .bottom-nav {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      height: 60px;
      background: rgba(255, 255, 255, 0.96);
      box-shadow: 0 -8px 24px rgba(15, 23, 42, 0.18);
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 30;
    }

    .bottom-nav-inner {
      max-width: 960px;
      width: 100%;
      display: flex;
      justify-content: space-around;
      padding: 0 12px;
    }

    .nav-item {
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 2px;
      font-size: 10px;
      color: #6b7280;
      cursor: pointer;
    }

    .nav-item span.icon {
      font-size: 16px;
    }

    .nav-item.active {
      color: var(--accent);
      font-weight: 600;
    }

    /* --------------------------
       9. ì•½&ìˆ˜ë©´ ìƒì„¸ë³´ê¸° í™”ë©´
       -------------------------- */
    #detailView {
      max-width: 960px;
      margin: 8px auto 80px;
      padding: 0 12px 24px;
    }

    .detail-header {
      margin-top: 8px;
      margin-bottom: 6px;
      font-size: 14px;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .detail-tabs {
      display: flex;
      border-radius: 999px;
      overflow: hidden;
      border: 1px solid #e5e7eb;
      background: #e5e7eb;
      margin-bottom: 10px;
      max-width: 260px;
    }

    .detail-tab {
      flex: 1;
      text-align: center;
      padding: 6px 0;
      font-size: 13px;
      cursor: pointer;
      color: #6b7280;
    }

    .detail-tab.active {
      background: #ffffff;
      color: #111827;
      font-weight: 600;
      box-shadow: 0 6px 14px rgba(15, 23, 42, 0.15);
    }

    .detail-card {
      background: var(--bg-card);
      border-radius: var(--radius-card);
      box-shadow: var(--shadow-soft);
      padding: 14px 14px 16px;
      margin-bottom: 14px;
    }

    .detail-row {
      display: grid;
      grid-template-columns: 70px 1fr;
      gap: 8px;
      align-items: center;
      margin-bottom: 8px;
      font-size: 12px;
    }

    .detail-row label {
      font-weight: 600;
      color: #4b5563;
    }

    .detail-input-line {
      display: flex;
      gap: 6px;
      align-items: center;
      flex-wrap: wrap;
    }

    .detail-input {
      border-radius: 10px;
      border: 1px solid var(--border-soft);
      padding: 6px 8px;
      font-size: 12px;
      min-width: 60px;
      background: #f9fafb;
      outline: none;
    }

    .detail-input:focus {
      border-color: var(--accent);
      background: #ffffff;
      box-shadow: 0 0 0 1px rgba(99, 102, 241, 0.35);
    }

    .detail-suffix {
      font-size: 11px;
      color: #6b7280;
    }

    .detail-save-btn {
      margin-top: 10px;
      width: 100%;
      border-radius: var(--radius-pill);
      border: none;
      padding: 10px 12px;
      font-size: 13px;
      font-weight: 600;
      cursor: pointer;
      background: var(--accent);
      color: white;
      box-shadow: 0 10px 20px rgba(99, 102, 241, 0.4);
    }

    /* ê°„ë‹¨í•œ ë‹¬ë ¥ í‹€ (ë””ìì¸ìš©) */
    .mini-calendar {
      border-radius: 18px;
      border: 1px solid #e5e7eb;
      background: #f9fafb;
      padding: 10px 10px 12px;
      margin-top: 8px;
    }

    .mini-cal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 6px;
      font-size: 12px;
      font-weight: 600;
    }

    .mini-cal-grid {
      display: grid;
      grid-template-columns: repeat(7, minmax(0, 1fr));
      gap: 2px;
      font-size: 10px;
      text-align: center;
      color: #6b7280;
    }

    .mini-cal-cell {
      padding: 4px 0;
      border-radius: 8px;
    }

    .mini-cal-cell.today {
      background: var(--accent-soft);
      color: var(--accent);
      font-weight: 700;
    }

    .period-display {
      margin-top: 8px;
      font-size: 12px;
      font-weight: 600;
      text-align: center;
      background: #111827;
      color: white;
      border-radius: 999px;
      padding: 6px 10px;
    }
  </style>
</head>
<body>
  <!-- ìƒë‹¨ í—¤ë” -->
  <header>
    <div class="top-bar">
      <div class="top-left">
        <div class="menu-icon">
          <div></div>
        </div>
      </div>
      <div class="header-logo">
        <span class="emoji">ğŸ§ </span>
        <span class="text">A-Lab</span>
        <span class="header-title-sub">ì¼ì¼ë¡œê·¸</span>
      </div>
      <div class="top-right">
        <!-- ì˜¤ë¥¸ìª½ì—ëŠ” ë‚˜ì¤‘ì— ì„¤ì •/í”„ë¡œí•„ ì•„ì´ì½˜ ë“± ë°°ì¹˜ ê°€ëŠ¥ -->
      </div>
    </div>
  </header>

  <!-- ë©”ì¸ ì¼ì¼ë¡œê·¸ í™”ë©´ -->
  <main id="mainView">
    <!-- 1. ì˜¤ëŠ˜ ì§„í–‰ë¥  & ë‹¤ìŒ ì•½/ìˆ˜ë©´ -->
    <section class="card">
      <div class="card-header-row">
        <div>
          <div class="section-title-row">
            <div class="section-title">
              <span class="section-title-dot"></span>
              <span>ì˜¤ëŠ˜ ìš”ì•½</span>
            </div>
          </div>
          <div class="section-sub" id="todayDateLabel"></div>
        </div>
        <div class="badge-soft">
          <span>âœ”</span>
          <span id="todayDoneCount">0ê°œ ì™„ë£Œ</span>
        </div>
      </div>

      <div class="progress-wrapper">
        <div class="progress-bar-bg">
          <div class="progress-bar-fill" id="progressFill"></div>
          <div class="runner-emoji">ğŸƒâ€â™€ï¸</div>
        </div>
        <div class="progress-caption">
          <span>ê¸°ë¡í•˜ë©´ ì±„ì›Œì§€ëŠ” í•˜ë£¨</span>
          <span id="progressPercentLabel">0%</span>
        </div>
      </div>

      <div class="next-row">
        <!-- ì•½ -->
        <div class="next-item-card" id="nextMedCard">
          <div class="next-item-top">
            <span>ğŸ’Š ì•½</span>
            <button class="pill-btn" type="button" onclick="markNext('med')">
              <span>ë‹¤ìŒì—</span> âœ
            </button>
          </div>
          <div class="next-item-main">
            <div>
              <div class="next-label" id="nextMedLabel">ì•„ì¹¨</div>
              <div class="section-sub">ì„¤ì •ëœ ì‹œê°„ ê¸°ì¤€</div>
            </div>
            <div style="text-align:right;">
              <div class="next-time" id="nextMedTime">09:00</div>
              <div class="next-diff" id="nextMedDiff">+0h00m</div>
            </div>
          </div>
        </div>

        <!-- ìˆ˜ë©´ -->
        <div class="next-item-card" id="nextSleepCard">
          <div class="next-item-top">
            <span>ğŸ˜´ ìˆ˜ë©´</span>
            <button class="pill-btn" type="button" onclick="markNext('sleep')">
              <span>ë‹¤ìŒì—</span> âœ
            </button>
          </div>
          <div class="next-item-main">
            <div>
              <div class="next-label" id="nextSleepLabel">ê¸°ìƒ</div>
              <div class="section-sub">ì„¤ì •ëœ ì‹œê°„ ê¸°ì¤€</div>
            </div>
            <div style="text-align:right;">
              <div class="next-time" id="nextSleepTime">07:30</div>
              <div class="next-diff" id="nextSleepDiff">+0h00m</div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- 2. ì•½ & ìˆ˜ë©´ ì•„ì½”ë””ì–¸ ì¹´ë“œ -->
    <section class="card">
      <div class="accordion-header" onclick="toggleAccordion()">
        <div class="accordion-title">
          <span>ğŸ’Š ì•½ & ìˆ˜ë©´</span>
        </div>
        <span class="accordion-arrow open" id="accordionArrow">â–¾</span>
      </div>

      <div id="accordionBody">
        <div class="med-sleep-columns">
          <!-- ì•½ ë³µìš© -->
          <div class="sub-card">
            <div class="sub-card-title">
              <span>ì•½ ë³µìš©</span>
            </div>
            <div id="medList">
              <!-- JSë¡œ í–‰ ìƒì„± -->
            </div>
          </div>

          <!-- ìˆ˜ë©´ ê´€ë¦¬ -->
          <div class="sub-card">
            <div class="sub-card-title">
              <span>ìˆ˜ë©´ ê´€ë¦¬</span>
            </div>
            <div id="sleepList">
              <!-- JSë¡œ í–‰ ìƒì„± -->
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- 3. ë‚´ ìƒíƒœ ê¸°ë¡ ì¹´ë“œ -->
    <section class="card">
      <div class="section-title-row">
        <div class="section-title">
          <span class="section-title-dot"></span>
          <span>ë‚´ ìƒíƒœ ê¸°ë¡</span>
        </div>
      </div>
      <div class="section-sub">ì§€ê¸ˆ ë– ì˜¤ë¥´ëŠ” ìƒê°Â·ê¸°ë¶„ì„ í•œ ì¤„ë¡œ ë‚¨ê²¨ë‘ì„¸ìš”.</div>

      <div class="status-card-input">
        <input
          id="statusInput"
          class="status-input"
          type="text"
          placeholder="ì—ì´ë©ë‹˜ ë°˜ê°€ì›Œìš”! ìƒíƒœë¥¼ ì•Œë ¤ì£¼ì„¸ìš”~"
        />
        <button class="status-send-btn" type="button" onclick="addStatusLog()">
          <span>ê¸°ë¡</span> â®•
        </button>
      </div>

      <div class="section-title-row" style="margin-top:12px;">
        <div class="section-title">
          <span class="section-title-dot"></span>
          <span>ê¸°ë¡ ë³´ê¸°</span>
        </div>
      </div>
      <div class="status-log-list" id="statusLog"></div>
    </section>

    <!-- 4. ì˜¤ëŠ˜ í†µê³„ ì¹´ë“œ -->
    <section class="card">
      <div class="section-title-row">
        <div class="section-title">
          <span class="section-title-dot"></span>
          <span>ì˜¤ëŠ˜ ì²´í¬ ìš”ì•½</span>
        </div>
      </div>
      <div class="stats-grid">
        <div class="stat-pill">
          <span class="stat-label">ì•½ ë³µìš© ì²´í¬</span>
          <span class="stat-value" id="statMedCount">0ê°œ</span>
        </div>
        <div class="stat-pill">
          <span class="stat-label">ìˆ˜ë©´ ê´€ë¦¬ ì²´í¬</span>
          <span class="stat-value" id="statSleepCount">0ê°œ</span>
        </div>
        <div class="stat-pill">
          <span class="stat-label">ìƒíƒœ ë©”ì‹œì§€</span>
          <span class="stat-value" id="statStatusCount">0ê°œ</span>
        </div>
        <div class="stat-pill">
          <span class="stat-label">ì „ì²´ ì²´í¬ í•©ê³„</span>
          <span class="stat-value" id="statTotalCount">0ê°œ</span>
        </div>
      </div>
    </section>
  </main>

  <!-- ì•½&ìˆ˜ë©´ ìƒì„¸ë³´ê¸° í™”ë©´ -->
  <section id="detailView" class="hidden">
    <div class="detail-header">
      <span>â—</span>
      <span>ì•½&ìˆ˜ë©´ ìƒì„¸ë³´ê¸°</span>
    </div>

    <div class="detail-tabs">
      <div
        class="detail-tab active"
        id="tabMed"
        onclick="switchDetailTab('med')"
      >
        ì•½
      </div>
      <div
        class="detail-tab"
        id="tabSleep"
        onclick="switchDetailTab('sleep')"
      >
        ìˆ˜ë©´
      </div>
    </div>

    <!-- ì•½ ì„¤ì • ì¹´ë“œ -->
    <div class="detail-card" id="detailMedCard">
      <div class="card-header-row">
        <div class="section-title">
          <span class="section-title-dot"></span>
          <span>* ì•½ ì„¤ì •í•˜ê¸°</span>
        </div>
      </div>

      <div class="detail-row">
        <label>ë‚ ì§œ</label>
        <div class="detail-input-line">
          <input
            class="detail-input"
            type="date"
            id="medConfigDate"
            onchange="syncConfigDate()"
          />
        </div>
      </div>

      <!-- ì•„ì¹¨ / ì ì‹¬ / ì €ë… / ì·¨ì¹¨ / í•„ìš”ì‹œ / ì§ì ‘ì…ë ¥ -->
      <div id="medConfigRows"></div>

      <!-- ë¯¸ë‹ˆ ë‹¬ë ¥(ê¸°ê°„ ì„¤ì • ëŠë‚Œë§Œ) -->
      <div class="mini-calendar">
        <div class="mini-cal-header">
          <button
            type="button"
            class="detail-input"
            style="padding:4px 8px; min-width:40px;"
            onclick="changeMiniMonth(-1)"
          >
            â—€
          </button>
          <span id="miniMonthLabel">11ì›”</span>
          <button
            type="button"
            class="detail-input"
            style="padding:4px 8px; min-width:40px;"
            onclick="changeMiniMonth(1)"
          >
            â–¶
          </button>
        </div>
        <div class="mini-cal-grid" id="miniCalGrid"></div>
        <div class="period-display" id="periodDisplay">
          ê¸°ê°„ ë¯¸ì„¤ì •
        </div>
      </div>

      <button class="detail-save-btn" type="button">
        ì„¤ì • ì €ì¥
      </button>
    </div>

    <!-- ìˆ˜ë©´ ì„¤ì • ì¹´ë“œ (ë‹¨ìˆœ ë²„ì „) -->
    <div class="detail-card hidden" id="detailSleepCard">
      <div class="card-header-row">
        <div class="section-title">
          <span class="section-title-dot"></span>
          <span>* ìˆ˜ë©´ ì„¤ì •í•˜ê¸°</span>
        </div>
      </div>

      <div class="detail-row">
        <label>ê¸°ìƒ ì‹œê°„</label>
        <div class="detail-input-line">
          <input
            class="detail-input"
            type="time"
            id="sleepWakeTimeConfig"
            value="07:30"
          />
        </div>
      </div>
      <div class="detail-row">
        <label>ì·¨ì¹¨ ì‹œê°„</label>
        <div class="detail-input-line">
          <input
            class="detail-input"
            type="time"
            id="sleepBedTimeConfig"
            value="00:30"
          />
        </div>
      </div>
      <button class="detail-save-btn" type="button">
        ì„¤ì • ì €ì¥
      </button>
    </div>
  </section>

  <!-- í•˜ë‹¨ ë„¤ë¹„ê²Œì´ì…˜ -->
  <nav class="bottom-nav">
    <div class="bottom-nav-inner">
      <div class="nav-item active" onclick="switchView('main')">
        <span class="icon">ğŸ’¬</span>
        <span>ë‚´ ìƒíƒœ</span>
      </div>
      <div class="nav-item">
        <span class="icon">ğŸ§©</span>
        <span>í• ì¼ ë£¨í‹´</span>
      </div>
      <div class="nav-item">
        <span class="icon">ğŸ“·</span>
        <span>ì¹´ë©”ë¼?</span>
      </div>
      <div class="nav-item" onclick="switchView('detail')">
        <span class="icon">âœ…</span>
        <span>ì•½&ìˆ˜ë©´</span>
      </div>
      <div class="nav-item">
        <span class="icon">ğŸ“ˆ</span>
        <span>í†µê³„ë³´ê¸°</span>
      </div>
    </div>
  </nav>

  <script>
    /* ===============================
       JS: ì•„ì£¼ ê¸°ë³¸ ê¸°ëŠ¥ë§Œ ìœ ì§€
       =============================== */

    // ì•½Â·ìˆ˜ë©´ ê¸°ë³¸ ë°ì´í„° (ê°„ë‹¨ ë²„ì „)
    const medPlans = [
      { id: "ì•„ì¹¨", label: "ì•„ì¹¨", time: "09:00" },
      { id: "ì ì‹¬", label: "ì ì‹¬", time: "13:00" },
      { id: "ì €ë…", label: "ì €ë…", time: "19:00" },
      { id: "ì·¨ì¹¨", label: "ì·¨ì¹¨ì „", time: "23:30" },
      { id: "í•„ìš”ì‹œ", label: "í•„ìš”ì‹œ", time: "00:00" },
      { id: "ì§ì ‘ì…ë ¥", label: "ì§ì ‘ì…ë ¥", time: "00:00" }
    ];

    const sleepPlans = [
      { id: "ê¸°ìƒ", label: "ê¸°ìƒ", time: "07:30" },
      { id: "ëˆ„ì›€", label: "ëˆ„ìš´ ì‹œê°„", time: "00:20" },
      { id: "ì§„ì§œì ", label: "ì§„ì§œ ì”ë‹¤", time: "00:40" },
      { id: "ì¼ì–´ë‚¨", label: "ì¼ì–´ë‚¨", time: "07:10" }
    ];

    let medIndex = 0;
    let sleepIndex = 0;

    let medCheckCount = 0;
    let sleepCheckCount = 0;
    let statusCount = 0;

    // ì˜¤ëŠ˜ ë‚ ì§œ í‘œì‹œ
    function setTodayLabel() {
      const today = new Date();
      const yyyy = today.getFullYear();
      const mm = String(today.getMonth() + 1).padStart(2, "0");
      const dd = String(today.getDate()).padStart(2, "0");
      const dayNames = ["ì¼", "ì›”", "í™”", "ìˆ˜", "ëª©", "ê¸ˆ", "í† "];
      const day = dayNames[today.getDay()];
      document.getElementById(
        "todayDateLabel"
      ).innerText = `${yyyy}/${mm}/${dd} (${day}) ê¸°ì¤€`;
    }

    // ì²´í¬ í–‰ ìƒì„±
    function renderCheckLists() {
      const medList = document.getElementById("medList");
      const sleepList = document.getElementById("sleepList");
      medList.innerHTML = "";
      sleepList.innerHTML = "";

      medPlans.forEach((plan, idx) => {
        const row = document.createElement("div");
        row.className = "check-row";
        row.dataset.type = "med";
        row.dataset.index = idx;

        row.innerHTML = `
          <div class="check-left">
            <input type="checkbox" onchange="handleCheck(this)" />
            <div>
              <div class="check-label-main">${plan.label}</div>
              <div class="check-plan">${plan.time}</div>
            </div>
          </div>
          <div class="check-right">
            <div class="check-time"></div>
            <div class="check-diff"></div>
          </div>
        `;
        medList.appendChild(row);
      });

      sleepPlans.forEach((plan, idx) => {
        const row = document.createElement("div");
        row.className = "check-row";
        row.dataset.type = "sleep";
        row.dataset.index = idx;

        row.innerHTML = `
          <div class="check-left">
            <input type="checkbox" onchange="handleCheck(this)" />
            <div>
              <div class="check-label-main">${plan.label}</div>
              <div class="check-plan">${plan.time}</div>
            </div>
          </div>
          <div class="check-right">
            <div class="check-time"></div>
            <div class="check-diff"></div>
          </div>
        `;
        sleepList.appendChild(row);
      });
    }

    // ë‹¤ìŒ ì¹´ë“œ í‘œì‹œ
    function setNextCards() {
      const med = medPlans[medIndex];
      const sleep = sleepPlans[sleepIndex];
      document.getElementById("nextMedLabel").innerText = med.label;
      document.getElementById("nextMedTime").innerText = med.time;
      document.getElementById("nextSleepLabel").innerText = sleep.label;
      document.getElementById("nextSleepTime").innerText = sleep.time;

      updateDiffLabel("med");
      updateDiffLabel("sleep");
    }

    // í˜„ì¬ ì‹œê°„ í˜•ì‹ (HH:MM)
    function getNowTimeString() {
      const now = new Date();
      const hh = String(now.getHours()).padStart(2, "0");
      const mm = String(now.getMinutes()).padStart(2, "0");
      return `${hh}:${mm}`;
    }

    // ì‹œê°„ ì°¨ì´ ê³„ì‚° (+- 0h00m)
    function calcTimeDiffStr(planTimeStr) {
      const [ph, pm] = planTimeStr.split(":").map(Number);
      const now = new Date();
      const nh = now.getHours();
      const nm = now.getMinutes();
      const planMinutes = ph * 60 + pm;
      const nowMinutes = nh * 60 + nm;
      const diff = nowMinutes - planMinutes; // +ë©´ ëŠ¦ìŒ
      const sign = diff >= 0 ? "+" : "-";
      const abs = Math.abs(diff);
      const h = Math.floor(abs / 60);
      const m = abs % 60;
      return `${sign}${h}h${String(m).padStart(2, "0")}m`;
    }

    function updateDiffLabel(type) {
      if (type === "med") {
        const med = medPlans[medIndex];
        document.getElementById("nextMedDiff").innerText = calcTimeDiffStr(
          med.time
        );
      } else {
        const sleep = sleepPlans[sleepIndex];
        document.getElementById("nextSleepDiff").innerText = calcTimeDiffStr(
          sleep.time
        );
      }
    }

    // â€œë‹¤ìŒì—â€ ë²„íŠ¼ í´ë¦­
    function markNext(type) {
      if (type === "med") {
        medIndex = (medIndex + 1) % medPlans.length;
      } else {
        sleepIndex = (sleepIndex + 1) % sleepPlans.length;
      }
      setNextCards();
    }

    // ì²´í¬ í•¸ë“¤ëŸ¬
    function handleCheck(checkbox) {
      const row = checkbox.closest(".check-row");
      const type = row.dataset.type;
      const index = Number(row.dataset.index);
      const nowStr = getNowTimeString();

      const timeEl = row.querySelector(".check-time");
      const diffEl = row.querySelector(".check-diff");
      const planStr =
        type === "med" ? medPlans[index].time : sleepPlans[index].time;

      if (checkbox.checked) {
        row.classList.add("checked");
        timeEl.innerText = nowStr;
        diffEl.innerText = calcTimeDiffStr(planStr);

        if (type === "med") medCheckCount++;
        else sleepCheckCount++;
      } else {
        row.classList.remove("checked");
        timeEl.innerText = "";
        diffEl.innerText = "";
        if (type === "med" && medCheckCount > 0) medCheckCount--;
        if (type === "sleep" && sleepCheckCount > 0) sleepCheckCount--;
      }
      updateStats();
    }

    function updateStats() {
      const total = medCheckCount + sleepCheckCount;
      document.getElementById("statMedCount").innerText = `${medCheckCount}ê°œ`;
      document.getElementById(
        "statSleepCount"
      ).innerText = `${sleepCheckCount}ê°œ`;
      document.getElementById("statStatusCount").innerText = `${statusCount}ê°œ`;
      document.getElementById("statTotalCount").innerText = `${total}ê°œ`;
      document.getElementById("todayDoneCount").innerText = `${total}ê°œ ì™„ë£Œ`;
      const percent = Math.min(100, total * 10);
      document.getElementById("progressFill").style.width = `${percent}%`;
      document.getElementById("progressPercentLabel").innerText = `${percent}%`;
    }

    // ì•„ì½”ë””ì–¸ í† ê¸€
    function toggleAccordion() {
      const body = document.getElementById("accordionBody");
      const arrow = document.getElementById("accordionArrow");
      if (body.style.display === "none") {
        body.style.display = "";
        arrow.classList.add("open");
      } else {
        body.style.display = "none";
        arrow.classList.remove("open");
      }
    }

    // ë‚´ ìƒíƒœ ê¸°ë¡ ì¶”ê°€
    const statusLogs = [];
    function addStatusLog() {
      const input = document.getElementById("statusInput");
      const text = input.value.trim();
      if (!text) return;
      const now = new Date();
      const timeStr = `${String(now.getHours()).padStart(
        2,
        "0"
      )}:${String(now.getMinutes()).padStart(2, "0")}`;

      statusLogs.push({ text, time: now });
      statusCount++;
      updateStatusLogList();
      updateStats();
      input.value = "";
    }

    function formatAgo(prev, now) {
      const diffMs = now - prev;
      const diffMin = Math.floor(diffMs / 60000);
      if (diffMin < 1) return "ë°©ê¸ˆ ì „";
      if (diffMin < 60) return `${diffMin}ë¶„ ì „`;
      const h = Math.floor(diffMin / 60);
      const m = diffMin % 60;
      if (m === 0) return `${h}ì‹œê°„ ì „`;
      return `${h}ì‹œê°„ ${m}ë¶„ ì „`;
    }

    function updateStatusLogList() {
      const container = document.getElementById("statusLog");
      container.innerHTML = "";
      for (let i = statusLogs.length - 1; i >= 0; i--) {
        const log = statusLogs[i];
        const now = new Date();
        const timeLabel =
          i === statusLogs.length - 1
            ? "ë°©ê¸ˆ ì „"
            : formatAgo(statusLogs[i].time, now);
        const timeStr = `${String(log.time.getHours()).padStart(
          2,
          "0"
        )}:${String(log.time.getMinutes()).padStart(2, "0")}`;

        const item = document.createElement("div");
        item.className = "status-item";
        item.innerHTML = `
          <div class="status-content">${log.text}</div>
          <div class="status-time">${timeStr}<br/>${timeLabel}</div>
        `;
        container.appendChild(item);
      }
    }

    // ë·° ì „í™˜ (ë©”ì¸ / ìƒì„¸)
    function switchView(target) {
      const main = document.getElementById("mainView");
      const detail = document.getElementById("detailView");
      const navItems = document.querySelectorAll(".nav-item");
      navItems.forEach((n, idx) => {
        n.classList.remove("active");
        if (target === "main" && idx === 0) n.classList.add("active");
        if (target === "detail" && idx === 3) n.classList.add("active");
      });

      if (target === "main") {
        main.classList.remove("hidden");
        detail.classList.add("hidden");
      } else {
        main.classList.add("hidden");
        detail.classList.remove("hidden");
      }
    }

    // ìƒì„¸ íƒ­ ì „í™˜
    function switchDetailTab(type) {
      const tabMed = document.getElementById("tabMed");
      const tabSleep = document.getElementById("tabSleep");
      const cardMed = document.getElementById("detailMedCard");
      const cardSleep = document.getElementById("detailSleepCard");

      if (type === "med") {
        tabMed.active = true;
        tabMed.classList.add("active");
        tabSleep.classList.remove("active");
        cardMed.classList.remove("hidden");
        cardSleep.classList.add("hidden");
      } else {
        tabSleep.classList.add("active");
        tabMed.classList.remove("active");
        cardSleep.classList.remove("hidden");
        cardMed.classList.add("hidden");
      }
    }

    // ì•½ ì„¤ì • í–‰ (ì•„ì¹¨/ì ì‹¬/ì €ë…/ì·¨ì¹¨/í•„ìš”ì‹œ/ì§ì ‘ì…ë ¥)
    function renderMedConfigRows() {
      const container = document.getElementById("medConfigRows");
      container.innerHTML = "";
      medPlans.forEach((plan) => {
        const row = document.createElement("div");
        row.className = "detail-row";
        row.innerHTML = `
          <label>${plan.label}</label>
          <div class="detail-input-line">
            <input class="detail-input" type="text" placeholder="ì•½ ì´ë¦„" />
            <input class="detail-input" type="number" min="0" max="9999" placeholder="0" />
            <span class="detail-suffix">mg / ì•Œ / í¬</span>
            <input class="detail-input" type="time" value="${plan.time}" />
          </div>
        `;
        container.appendChild(row);
      });
    }

    // ìƒì„¸ ë‚ ì§œ ë™ê¸°í™” (ì˜¤ëŠ˜)
    function initConfigDate() {
      const today = new Date();
      const yyyy = today.getFullYear();
      const mm = String(today.getMonth() + 1).padStart(2, "0");
      const dd = String(today.getDate()).padStart(2, "0");
      document.getElementById("medConfigDate").value = `${yyyy}-${mm}-${dd}`;
    }

    function syncConfigDate() {
      // í˜„ì¬ ë²„ì „ì—ì„œëŠ” ë‚ ì§œ ê°’ë§Œ ìœ ì§€ (ì¶”ê°€ ë¡œì§ì€ ë‚˜ì¤‘ì—)
    }

    // ë¯¸ë‹ˆ ë‹¬ë ¥ (ë‹¨ìˆœí•œ ëª¨ì–‘ë§Œ)
    let miniMonthOffset = 0;
    function renderMiniCalendar() {
      const grid = document.getElementById("miniCalGrid");
      const label = document.getElementById("miniMonthLabel");

      const base = new Date();
      base.setMonth(base.getMonth() + miniMonthOffset);
      const month = base.getMonth() + 1;
      label.innerText = `${month}ì›”`;

      grid.innerHTML = "";
      const weeks = ["S", "M", "T", "W", "T", "F", "S"];
      weeks.forEach((w) => {
        const c = document.createElement("div");
        c.className = "mini-cal-cell";
        c.style.fontWeight = "600";
        c.innerText = w;
        grid.appendChild(c);
      });

      for (let i = 1; i <= 35; i++) {
        const c = document.createElement("div");
        c.className = "mini-cal-cell";
        c.innerText = i <= 30 ? i : "";
        if (i === 20) c.classList.add("today");
        grid.appendChild(c);
      }
    }

    function changeMiniMonth(delta) {
      miniMonthOffset += delta;
      renderMiniCalendar();
    }

    // ì´ˆê¸°í™”
    function init() {
      setTodayLabel();
      renderCheckLists();
      setNextCards();
      renderMedConfigRows();
      initConfigDate();
      renderMiniCalendar();
      updateStats();
    }

    init();
  </script>
</body>
</html>
